<!DOCTYPE html>
<html>
<%- include ./head %>
    <body>
    <%- include ./dev %>
    <%- include ./nav %>
    <div class="page uinfo2">
      <div class="adminPage">
        <%# Î©îÎâ¥ Î∞î %>
        <div class="menu">
          <div class="col" style="height: 50px; display: flex; align-content: center;">
            <div class="logo">Íµ≠Î∞©ÌÄ¥Ï¶à Í¥ÄÎ¶¨Ïûê</div>
          </div>
          <hr>
          <div class="col">
            <center class="centerMenu">
              <div class="logo"><%= udata.uname %>Îãò, Ï†ëÏÜç Ï§ë...</div><div style="height: 10px;"></div>
              <div class="logo">Í¥ÄÎ¶¨</div>
              <div class="menubox">
                <div class="col">
                  <a href="/admin" id="aMain" class="logo menulist" onclick="menuClick(this)" onmousemove="mouseOver(this)" onmouseout="mouseOut(this)">
                    <img src="images/menuhome.png" onerror="this.src='images/user.png'" width="30" height="30">&nbsp
                    <input type="hidden" name="mainpage">
                    Î©îÏù∏
                  </a>
                  <a href="/notice" id="aNotice" class="logo menulist" onclick="menuClick(this)" onmousemove="mouseOver(this)" onmouseout="mouseOut(this)">
                    <img src="images/menunotice.png" onerror="this.src='images/user.png'" width="30" height="30">&nbsp
                    Í≥µÏßÄÏÇ¨Ìï≠
                  </a>
                  <a href=/userpg id="aUser" class="logo menulist" onclick="menuClick(this)" onmousemove="mouseOver(this)" onmouseout="mouseOut(this)">
                    <img src="images/menuuser.png" onerror="this.src='images/user.png'" width="30" height="30">&nbsp
                    Ïú†Ï†Ä
                  </a>
                </div>
              </div>
            </center>
          </div>
        </div>
        <%# ÏΩòÌÖêÏ∏† notice %>
        <div class="noticeboard" style="overflow: auto;">
          <div class="logo" style="color: black; font-size: 40px;">üì¢Í≥µÏßÄÏÇ¨Ìï≠</div>
          <center>
            <table width="100%" style="border-collapse: collapse;">
              <thead>
                <tr style="border-bottom: 1px solid #444444;">
                  <th>Í≤åÏãúÍ∏Ä Î≤àÌò∏</th>
                  <th>Ï†úÎ™©</th>
                  <th>ÎÇ¥Ïö©</th>
                  <th>ÏûëÏÑ±Ïûê</th>
                  <th>ÏûëÏÑ±ÏùºÏûê</th>
                  <th> üóë </th>
                </tr>
              </thead>
              <tbody>
                <form method="post" action="/addadminnotice">
                  <tr align="center">
                    <td>Í≤åÏãúÍ∏Ä Îì±Î°ù</td>
                    <td>
                      <input type="radio" name="iorn" value="i">‚≠êÏ§ëÏöî
                      <input type="radio" name="iorn" value="n">üîóÏùºÎ∞ò
                    </td>
                    <td><input name="title" type="text" placeholder="Ï†úÎ™©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî."></td>
                    <td><input name="addcontext" type="text" placeholder="ÎÇ¥Ïö©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî."></td>
                    <td><input type="submit" value="Ï∂îÍ∞Ä"></td>
                  </tr>
                </form>
                <form method="post" action="/adminnoticedel">
                  <% for(var i = 0; i < notice.length; i++){ %>
                    <% if(notice[i].ntype === 1){ %>
                      <tr align="center" id="<%= i %>" onclick="modal(this)">
                        <td><%= notice[i].nid %></td>
                        <td>‚≠ê<%= notice[i].ntitle %></td>
                        <td><%= notice[i].ndesc.substr(0,20) %>...</td>
                        <td><%= notice[i].nauthor %></td>
                        <td><%= notice[i].ndate %></td>
                        <td><input type="submit" value="ÏÇ≠Ï†ú"></td>
                      </tr>
                    <% } else { %>
                      <tr align="center" id="<%= i %>" onclick="modal(this)">
                        <td><%= notice[i].nid %></td>
                        <td><%= notice[i].ntitle %></td>
                        <td><%= notice[i].ndesc.substr(0,20) %>...</td>
                        <td><%= notice[i].nauthor %></td>
                        <td><%= notice[i].ndate %></td>
                        <td><input type="submit" value="ÏÇ≠Ï†ú"></td>
                      </tr>
                    <% } %>
                    <input type="hidden" id="hidden<%= i %>" value="<%= notice[i].ndesc %>">
                    <input type="hidden" id="hiddenid<%= i %>" value="<%= notice[i].nid %>">
                  <% } %>
                  <input type="hidden" name="hiddennid" id="hiddennid" value="">
                </form>
              </tbody>
            </table>
          </center>
        </div>
      </div>
    </div>
    <div class="background">
      <div class="window">
        <div class="popup">
          <form method="post" action="/adminnoticesave">
            <input type="submit" id="close" style="float: right;" value="Ï†ÄÏû•" onclick="mytext()">
            <input type="hidden" name="hiddentext" id="hiddentext" value="">
            <input type="hidden" name="hiddennid2" id="hiddennid2" value="">
          </form>
          <form method="post" action="notice/del">
            <textarea id="noticetext" class="userInput" style="margin: 5px; padding: 5px; width: 700px; height: 455px; resize: none; overflow: auto;"></textarea>
          </form>
          
        </div>
    </div>
    </body>
    
    <script>
      function mouseOver(target){
        target.style.color = 'green';
        target.style.cursor= 'pointer';
      }

      function mouseOut(target){
        target.style.color = 'white';
      }

      document.addEventListener('scroll', () => {
        let y = window.scrollY;
        if (y > 120) {
            $('.navbar').addClass('navbar-bg');
        } else {
            $('.navbar').removeClass('navbar-bg');
        }
      });

      $('.post').click(function () {
        $('.post').find('.desc').removeClass('show');
        $(this).find('.desc').toggleClass('show');
      })
      // modal
      function show(context) {
        document.querySelector("#noticetext").textContent = context;
        document.querySelector(".background").className = "background show";
        
      }

      function close() {
        document.querySelector(".background").className = "background";
      }
      
      function modal(target){
        let context = document.getElementById("hidden"+target.id).value;
        document.getElementById("hiddennid").value = document.getElementById("hiddenid"+target.id).value;
        document.getElementById("hiddennid2").value = document.getElementById("hiddenid"+target.id).value;
        document.getElementById("hiddentext").value = context;
        show(context);
      }

      function mytext(){
        document.getElementById("hiddentext").value = document.getElementById("noticetext").value;
        
      }

      document.querySelector("#close").addEventListener("click", close);
    </script>
</html>